var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(i){n=[6,i],o=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},UIComponent=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdded,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoved,t),t}return __extends(t,e),t.prototype.onAdded=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this)},t.prototype.onRemoved=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)},t}(egret.DisplayObjectContainer);__reflect(UIComponent.prototype,"UIComponent"),window.UIComponent=UIComponent;var DragonBonesAnimation=function(e){function t(){var t=e.call(this)||this;return t._loaded=!1,t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoved,t),t}return __extends(t,e),t.prototype.onRemoved=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this._display&&(this._display.removeEvent(dragonBones.EventObject.COMPLETE,this.onComplete,this),this._display.dispose())},t.prototype.buildArmature=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return this._loaded=!1,[4,RES.getResAsync(e+"_tex_json")];case 1:return n.sent(),[4,RES.getResAsync(e+"_tex_png")];case 2:return n.sent(),[4,RES.getResAsync(e+"_ske_dbbin")];case 3:return n.sent(),dragonBones.EgretFactory.factory.parseDragonBonesData(RES.getRes(e+"_ske_dbbin")),dragonBones.EgretFactory.factory.parseTextureAtlasData(RES.getRes(e+"_tex_json"),RES.getRes(e+"_tex_png")),this._loaded=!0,this.dispatchEventWith(t.DragonBonesAnimation_LoadComplete),[2]}})})},t.prototype.buildArmatureDisplay=function(e){null!=this._display&&(this._display.removeEvent(dragonBones.EventObject.COMPLETE,this.onComplete,this),this.removeChildren(),this._display=null),this._display=dragonBones.EgretFactory.factory.buildArmatureDisplay(e),this._display.addEvent(dragonBones.EventObject.COMPLETE,this.onComplete,this),this.addChild(this._display)},t.prototype.onComplete=function(e){this.dispatchEventWith(t.DragonBonesAnimation_Complete)},t.prototype.play=function(e){this._loaded&&this._display.animation.play(e)},t.DragonBonesAnimation_LoadComplete="DragonBonesAnimation_LoadComplete",t.DragonBonesAnimation_Complete="DragonBonesAnimation_Complete",t}(egret.DisplayObjectContainer);__reflect(DragonBonesAnimation.prototype,"DragonBonesAnimation"),window.DragonBonesAnimation=DragonBonesAnimation;var Mediator=function(){function e(){}return e.prototype.notificationListeners=function(){return[]},e.prototype.executeNotification=function(e,t){},e}();__reflect(Mediator.prototype,"Mediator",["IMediator"]),window.Mediator=Mediator;var Facade=function(){function e(){}return e.sendNotification=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var r=e._dicmediator[t];if(null!=r)for(var o=0;o<r.length;o++)r[o].executeNotification(t,n,i)},e.registerNotifListeners=function(t){for(var n=t.notificationListeners(),i=n.length,r=0;i>r;r++){var o=e._dicmediator[n[r]];null!=o?o.push(t):(o=new Array,o.push(t),e._dicmediator[n[r]]=o)}},e.removeNotifListeners=function(t){for(var n=t.notificationListeners(),i=n.length,r=0;i>r;r++){var o=(e._dicmediator,e._dicmediator[n[r]]);if(null!=o)for(var s=o.length-1;s>=0;s--)o[s]==t&&o.splice(s,1)}},e._dicmediator=new Array,e}();__reflect(Facade.prototype,"Facade"),window.Facade=Facade;var JsonpMap=function(){function e(){}return e}();__reflect(JsonpMap.prototype,"JsonpMap");var NetUtil=function(){function e(){}return e.postSubmit=function(e,t){var n=document.createElement("form");n.action=e,n.method="post",n.style.display="none";for(var i in t){var r=document.createElement("textarea");r.name=i,r.value=t[i],n.appendChild(r)}return document.body.appendChild(n),n.submit(),n},e.getNetResult=function(e,t,n,i){var r=new egret.URLLoader;r.dataFormat=egret.URLLoaderDataFormat.TEXT,r.once(egret.Event.COMPLETE,function(){t.call(i,r.data)},this),r.once(egret.IOErrorEvent.IO_ERROR,function(){null!=n&&n.apply(i)},this),r.load(new egret.URLRequest(e))},e.getNetResultByJsonP=function(t,n,i){var r=this,o=e._jsonp++;JsonpMap["call_"+o]=function(e){n.call(r,e),delete JsonpMap["call_"+o],JsonpMap["call_"+o]=null;var t=document.getElementById("jsonp"+o);document.body.removeChild(t)};var s=document.createElement("script");s.id="jsonp"+o,s.src=t+"&callback=JsonpMap.call_"+o,document.body.appendChild(s)},e._jsonp=1,e}();__reflect(NetUtil.prototype,"NetUtil"),window.NetUtil=NetUtil;var TimeUtil=function(){function e(){}return e.getTimeStr=function(e){return 3600>e?"刚刚":e>=3600&&86400>e?Math.floor(e/3600)+"小时前":Math.floor(e/86400)+"天"+Math.floor(e%86400/3600)+"小时前"},e.getTimeString=function(e){var t=e,n=e%60;t=(t-n)/60;var i=t%60;t=(t-i)/60;var r=t;return""+r+"小时"+i+"分钟"+n+"秒"},e.getTimeString2=function(e){var t=e,n=e%60;t=(t-n)/60;var i=t%60;t=(t-i)/60;var r=t,o="00"+r,s="00"+i,a="00"+n;return o=o.substr(o.length-2,2),s=s.substr(s.length-2,2),a=a.substr(a.length-2,2),""+o+":"+s+":"+a},e.getTimeStringSimple=function(e,t){void 0===t&&(t="hh:mm:ss");var n=e,i=n%60,r="00"+i;n=(n-i)/60;var o=n%60,s="00"+o;n=(n-o)/60;var a=n,c="00"+a;return"mm:ss"==t?(o+=60*a,o>99?o+"":s.substring(s.length-2)+":"+r.substring(r.length-2)):c.substring(c.length-2)+":"+s.substring(s.length-2)+":"+r.substring(r.length-2)},e.format=function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},e.getDateTimeString=function(e,t){void 0===t&&(t="yyyy-MM-dd hh:mm");var n=new Date(1e3*e);return this.format(n,t)},e.getTimeStringType1=function(e){var t,n=0;return e>86400?(n=Math.floor(e/86400),t=e%86400):t=e,0!=n?n+"天"+this.getTimeStringSimple(t):this.getTimeStringSimple(t)},e.getTimeShortStringType=function(e){var t="";return t=0>=e?"1秒":60>e?Math.floor(e)+"秒":60>e/60?Math.floor(e/60)+"分钟":24>e/60/60?Math.floor(e/60/60)+"小时":Math.floor(e/60/60/24)+"天"},e.getTimeStamp=function(){return(new Date).getTime()},e.getServerNowTime=function(e){var t=new Date(1e3*e),n="00"+t.getHours(),i="00"+t.getMinutes(),r="00"+t.getSeconds();return n.substr(n.length-2,2)+":"+i.substr(i.length-2,2)+":"+r.substr(r.length-2,2)},e}();__reflect(TimeUtil.prototype,"TimeUtil"),window.TimeUtil=TimeUtil;var ParamsUtil=function(){function e(){}return e.getQueryString=function(e){if(egret.Capabilities.runtimeType==egret.RuntimeType.WEB){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t),i="";return null!=n&&(i=n[2]),t=null,n=null,null==i||""==i||"undefined"==i?"":i}return""},e.getUrlQueryString=function(e,t){for(var n="",i=e.split("&"),r=0;r<i.length;r++){var o=i[r].split("=");if(2==o.length&&o[0]==t){n=o[1];break}}return n},e.getPassportString=function(){var e="";return e=window.location.search,e.substring(1)},e}();__reflect(ParamsUtil.prototype,"ParamsUtil"),window.ParamsUtil=ParamsUtil;var RandomUtil=function(){function e(){}return e.resetSeed=function(){this.setSeed((new Date).valueOf())},e.setSeed=function(t){e.seed=t,e.result=e.seed},e.getSeed=function(){return e.seed},e.getR=function(){return e.result=(e.result*e.a+e.b)%((1<<31)-1),e.result},e.getRandom=function(e,t){return e+this.getR()%(t-e)},e.seed=19830729,e.result=830729,e.a=777,e.b=22,e}();__reflect(RandomUtil.prototype,"RandomUtil"),window.RandomUtil=RandomUtil;var BaseView=function(e){function t(){var t=e.call(this)||this;return t._loaded=!1,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdded,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoved,t),t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"skinPath",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resourceGroup",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skinClass",{get:function(){return""},enumerable:!0,configurable:!0}),t.prototype.notificationListeners=function(){return[]},t.prototype.executeNotification=function(e,t,n){},t.prototype.onAdded=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.loadGroup()},t.prototype.loadGroup=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.touchEnabled=!1,this.touchChildren=!1,this.resourceGroup.length>0?[4,RES.loadGroup(this.resourceGroup)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.addEventListener(egret.Event.COMPLETE,this.onSkinComplete,this),this.skinName=this.skinClass,[2]}})})},t.prototype.onSkinComplete=function(e){this.loadComplete()},Object.defineProperty(t.prototype,"loaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),t.prototype.loadComplete=function(){this.touchEnabled=!0,this.touchChildren=!0,this._loaded=!0,Facade.registerNotifListeners(this)},t.prototype.onRemoved=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),Facade.removeNotifListeners(this),this.removeChildren()},t}(eui.Component);__reflect(BaseView.prototype,"BaseView",["IMediator"]),window.BaseView=BaseView;var BaseRenderView=function(e){function t(){var t=e.call(this)||this;return t.touchChildren=!1,t.touchEnabled=!0,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdded,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoved,t),t.skinName=t.skinClass,t}return __extends(t,e),t.prototype.notificationListeners=function(){return[]},t.prototype.executeNotification=function(e,t,n){},Object.defineProperty(t.prototype,"skinPath",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skinClass",{get:function(){return""},enumerable:!0,configurable:!0}),t.prototype.onAdded=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),Facade.registerNotifListeners(this)},t.prototype.onRemoved=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),Facade.removeNotifListeners(this),this.removeChildren()},t}(eui.ItemRenderer);__reflect(BaseRenderView.prototype,"BaseRenderView",["IMediator"]),window.BaseRenderView=BaseRenderView;var Log=function(){function e(){}return e.out=function(e,t){console.log("["+egret.getQualifiedClassName(e)+"]	"+t)},e._id=1,e}();__reflect(Log.prototype,"Log"),window.Log=Log;var UIButton=function(e){function t(){var t=e.call(this)||this;return t.scale=1.05,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdded,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoved,t),t.touchChildren=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"extLabel",{get:function(){return null!=this.labelDisplay2?this.labelDisplay2.text:""},set:function(e){null!=this.labelDisplay2&&(this.labelDisplay2.text=e)},enumerable:!0,configurable:!0}),t.prototype.setState=function(e){this.currentState=e,this.invalidateState()},Object.defineProperty(t.prototype,"hitArea",{get:function(){return this._hitArea},set:function(e){this._hitArea=e,this._hitArea.visible=!1},enumerable:!0,configurable:!0}),t.prototype.inArea=function(e){var t=this._hitArea.getTransformedBounds(this.stage),n=t.containsPoint(new egret.Point(e.stageX,e.stageY));return n},t.prototype.onTweenComplete=function(){},t.prototype.onAdded=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouch,this),this._hitArea=new eui.Rect,this._hitArea.fillAlpha=0,this._hitArea.fillColor=0,this.addChild(this._hitArea)},t.prototype.onRemoved=function(e){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouch,this)},t.prototype.setScale=function(e){this.scale=e},t.prototype.onTouch=function(e){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,e.type==egret.TouchEvent.TOUCH_BEGIN?(this._touchdown=!0,this._hitArea.width=this.width,this._hitArea.height=this.height,this.scaleX=this.scale,this.scaleY=this.scale,this._hitArea.x=.1*-this.width/2,this._hitArea.y=.1*-this.height/2):e.type==egret.TouchEvent.TOUCH_MOVE?(this._touchdown=!1,this.scaleX=1,this.scaleY=1,this._hitArea.x=0,this._hitArea.y=0):e.type==egret.TouchEvent.TOUCH_END?(this.scaleX=1,this.scaleY=1,this._hitArea.x=0,this._hitArea.y=0):e.type==egret.TouchEvent.TOUCH_RELEASE_OUTSIDE&&(this.scaleX=1,this.scaleY=1,this._hitArea.x=0,this._hitArea.y=0),this.anchorOffsetX=0,this.anchorOffsetY=0},t}(eui.Button);__reflect(UIButton.prototype,"UIButton"),window.UIButton=UIButton;var UICircleLoading=function(e){function t(){var t=e.call(this)||this;return t._backImage=new egret.Bitmap,t.addChild(t._backImage),t._s=new egret.Shape,t.addChild(t._s),t}return __extends(t,e),Object.defineProperty(t.prototype,"source",{get:function(){return this._backRes},set:function(e){this._backRes=e,this._backImage.texture=RES.getRes(e),this._r=this._backImage.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"percent",{get:function(){return this._p},set:function(e){this._p=e,this.drawSector(this._s,this._r,this._r,this._r,0,360*e),this._backImage.mask=this._s},enumerable:!0,configurable:!0}),t.prototype.drawSector=function(e,t,n,i,r,o,s){void 0===r&&(r=0),void 0===o&&(o=270),void 0===s&&(s=16777215),e.graphics.clear(),e.graphics.beginFill(s),e.graphics.lineStyle(0,16711680),e.graphics.moveTo(t,n),o=Math.abs(o)>360?360:o;var a=Math.ceil(Math.abs(o)/45),c=o/a;c=c*Math.PI/180,r=r*Math.PI/180,e.graphics.lineTo(t+i*Math.cos(r),n+i*Math.sin(r));for(var h=1;a>=h;h++){r+=c;var l=r-c/2,u=t+i/Math.cos(c/2)*Math.cos(l),d=n+i/Math.cos(c/2)*Math.sin(l),p=t+i*Math.cos(r),_=n+i*Math.sin(r);e.graphics.curveTo(u,d,p,_)}360!=o&&e.graphics.lineTo(t,n),e.graphics.endFill()},t}(UIComponent);__reflect(UICircleLoading.prototype,"UICircleLoading"),window.UICircleLoading=UICircleLoading;var UIGridType;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(UIGridType||(UIGridType={}));var UIGridEvent=function(e){function t(t,n,i){void 0===i&&(i=null);var r=e.call(this,t)||this;return r.index=n,r.param=i,r}return __extends(t,e),t.ITEM_CLICK="UIGrid_Item_Click",t}(egret.Event);__reflect(UIGridEvent.prototype,"UIGridEvent");var UIGrid=function(e){function t(){var t=e.call(this)||this;return t._gap=0,t._count=5,t._container=new eui.Group,t._container.name="container",t._container.touchEnabled=!0,t._container.touchThrough=!0,t.addChild(t._container),t._scroll=new eui.Scroller,t._scroll.name="scroll",t.type=UIGridType.Vertical,t.addChild(t._scroll),t._scroll.viewport=t._container,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdded,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoved,t),t._event=new UIGridEvent(UIGridEvent.ITEM_CLICK,0),t._customPoint=null,t._childskinloaded=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"customArray",{get:function(){return this._customPoint},set:function(e){this._customPoint=e},enumerable:!0,configurable:!0}),t.prototype.setWidth=function(e){this.width=e,this._container.width=this.width,this._scroll.width=this.width},t.prototype.setHeight=function(e){this.height=e,this._container.height=this.height,this._scroll.height=this.height},t.prototype.onAdded=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this._container.width=this.width,this._container.height=this.height,this._container.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTouch,this),this._scroll.width=this.width,this._scroll.height=this.height},t.prototype.onItemTouch=function(e){if(egret.is(e.target,"eui.ItemRenderer")){var t=e.target;this._event.index=t.itemIndex,this._event.param=t.data,this.dispatchEvent(this._event)}if(egret.is(e.target,"BaseRenderView"))for(var n=this._children.length,i=0;n>i;i++){var r=this._children[i];this._children[i]==e.target?r.setCurrentState&&r.setCurrentState("selected"):r.setCurrentState&&r.setCurrentState("normal")}},t.prototype.onRemoved=function(e){this._container.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTouch,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)},Object.defineProperty(t.prototype,"type",{set:function(e){this._type=e,this.reorder()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gap",{set:function(e){this._gap=e,this.reorder()},enumerable:!0,configurable:!0}),t.prototype.getSubChildAt=function(e){return this._children[e]},Object.defineProperty(t.prototype,"childrenCount",{get:function(){return this._container.numChildren},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineCount",{set:function(e){this._count=e,this.reorder()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemRenderer",{set:function(e){this._itemRenderer=e},enumerable:!0,configurable:!0}),t.prototype.bind=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return e=new this._itemRenderer,egret.is(e,"BaseRenderView")?(t=e,[4,this.loadTheme(t.skinPath)]):[3,2];case 1:n.sent(),this.bindData(),n.label=2;case 2:return[2]}})})},t.prototype.loadTheme=function(e){var t=this;return new Promise(function(n,i){EXML.load(e,function(e,i){t._childskin=e,n()},t)})},Object.defineProperty(t.prototype,"dataProvider",{get:function(){return this._dataProvider},set:function(e){this._dataProvider=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollerV",{get:function(){return this._scroll.viewport.scrollV},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollerH",{set:function(e){this._scroll.viewport.scrollH=e},enumerable:!0,configurable:!0}),t.prototype.movetoTop=function(){this._scroll.viewport.scrollV=0,this._scroll.viewport.scrollH=0},t.prototype.reorder=function(){if(this.parent&&this._children)for(var e=0,t=this._children.length,n=0;t>n;n++){var i=this._children[n];i.visible?(this.calcPosition(i,e),e++):i.x=i.y=0}},t.prototype.bindData=function(){if(this.parent){if(this._container.removeChildren(),this._children=[],this._itemRenderer&&this._dataProvider)for(var e=this._dataProvider.length,t=0;e>t;t++){var n=new this._itemRenderer;n.skinName=this._childskin,n.itemIndex=t,n.name=egret.getQualifiedClassName(n)+t,n.data=this._dataProvider[t],this.calcPosition(n,t),this._container.addChild(n),this._children.push(n)}this.movetoTop()}},t.prototype.calcPosition=function(e,t){null==this._customPoint?this._type==UIGridType.Horizontal?(e.y=t%this._count*(e.height+this._gap),e.x=Math.floor(t/this._count)*(e.width+this._gap)):this._type==UIGridType.Vertical&&(e.x=t%this._count*(e.width+this._gap),e.y=Math.floor(t/this._count)*(e.height+this._gap)):(e.y=this._customPoint[e.itemIndex][1],e.x=this._customPoint[e.itemIndex][0])},t}(eui.Group);__reflect(UIGrid.prototype,"UIGrid"),window.UIGrid=UIGrid;var UIListEvent=function(e){function t(t,n,i){void 0===i&&(i=null);var r=e.call(this,t)||this;return r.index=n,r.param=i,r}return __extends(t,e),t.ITEM_SELECTED="UIList_Item_Selected",t}(egret.Event);__reflect(UIListEvent.prototype,"UIListEvent");var UIListDirection;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(UIListDirection||(UIListDirection={}));var UIList=function(e){function t(){var t=e.call(this)||this;return t._widthGap=0,t._heightGap=0,t._container=new eui.Group,t._container.name="container",t._event=new UIListEvent(UIListEvent.ITEM_SELECTED,0),t._scroll=new eui.Scroller,t._scroll.scrollPolicyH=eui.ScrollPolicy.OFF,t.addChild(t._scroll),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdded,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoved,t),t.direction=UIListDirection.Vertical,t}return __extends(t,e),Object.defineProperty(t.prototype,"scroll",{get:function(){return this._scroll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e,this._direction==UIListDirection.Vertical?(this._scroll.scrollPolicyH=eui.ScrollPolicy.OFF,this._scroll.scrollPolicyV=eui.ScrollPolicy.AUTO):this._direction==UIListDirection.Horizontal&&(this._scroll.scrollPolicyH=eui.ScrollPolicy.AUTO,this._scroll.scrollPolicyV=eui.ScrollPolicy.OFF)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"heightGap",{get:function(){return this._heightGap},set:function(e){this._heightGap=e,this.bind()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widthGap",{get:function(){return this._widthGap},set:function(e){this._heightGap=e,this.bind()},enumerable:!0,configurable:!0}),t.prototype.onAdded=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this._scroll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTouch,this),this._scroll.width=this.width,this._scroll.height=this.height,this._scroll.viewport=this._container},t.prototype.onItemTouch=function(e){if(egret.is(e.target,"eui.ItemRenderer")){var t=e.target;this._event.index=t.itemIndex,this._event.param=t.data,this.dispatchEvent(this._event)}if(egret.is(e.target,"BaseRenderView"))for(var n=this._children.length,i=0;n>i;i++){var r=this._children[i];this._children[i]==e.target?r.setCurrentState&&r.setCurrentState("selected"):r.setCurrentState&&r.setCurrentState("normal")}},t.prototype.onRemoved=function(e){this._scroll.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTouch,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)},Object.defineProperty(t.prototype,"itemRenderer",{set:function(e){this._itemRenderer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataProvider",{get:function(){return this._dataProvider},set:function(e){this._dataProvider=e},enumerable:!0,configurable:!0}),t.prototype.movetoTop=function(){this._scroll.viewport.scrollV=0,this._scroll.viewport.scrollH=0},t.prototype.bind=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return e=new this._itemRenderer,egret.is(e,"BaseRenderView")?(t=e,[4,this.loadTheme(t.skinPath)]):[3,2];case 1:n.sent(),this.bindData(),n.label=2;case 2:return[2]}})})},t.prototype.loadTheme=function(e){var t=this;return new Promise(function(n,i){EXML.load(e,function(e,i){t._childskin=e,n()},t)})},t.prototype.bindData=function(){if(this.parent&&(this._container.removeChildren(),this._children=[],this._itemRenderer&&this._dataProvider))for(var e=this._dataProvider.length,t=0;e>t;t++){var n=new this._itemRenderer;n.skinName=this._childskin,n.itemIndex=t,n.data=this._dataProvider[t],this.direction==UIListDirection.Vertical?(n.x=0,n.y=t*(n.height+this._heightGap)):this.direction==UIListDirection.Horizontal&&(n.x=t*(n.width+this._widthGap),n.y=0),this._container.addChild(n),this._children.push(n)}},t}(eui.Group);__reflect(UIList.prototype,"UIList"),window.UIList=UIList;var LinkProxy=function(e){function t(){var t=e.call(this)||this;return t._opened=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linked",{get:function(){return null!=this._socket?this._socket.connected:!1},enumerable:!0,configurable:!0}),t.prototype.linkTo=function(e){var t="ws://";"http:"==location.protocol?t="ws://":"https:"==location.protocol&&(t="wss://"),this._opened=!1,this._socket=new egret.WebSocket,this._socket.type=egret.WebSocket.TYPE_BINARY,this._socket.type=egret.WebSocket.TYPE_STRING,this._socket.addEventListener(egret.Event.CONNECT,this.onConnect,this),this._socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onData,this),this._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._socket.addEventListener(egret.Event.CLOSE,this.onClose,this),this._socket.connectByUrl(t+e)},t.prototype.onError=function(e){this.dispatchEventWith(t.Link_Error)},t.prototype.onClose=function(e){this._opened=!1,this.dispatchEventWith(t.Link_Close),window.clearTimeout(this._heartClock)},t.prototype.onConnect=function(e){this._opened=!0,this.dispatchEventWith(t.Link_Success),window.setTimeout(this.heartFunc,1e4)},t.prototype.heartFunc=function(){},t.prototype.onData=function(e){},t.prototype.sendOrder=function(e){},t.Link_Success="LinkProxy_Link_Success",t.Link_Error="LinkProxy_Link_Error",t.Link_Close="LinkProxy_Link_Close",t}(egret.EventDispatcher);__reflect(LinkProxy.prototype,"LinkProxy"),window.LinkProxy=LinkProxy;var SceneBase=function(){function e(){}return e.prototype.enter=function(){},e.prototype.exit=function(){},Object.defineProperty(e.prototype,"scenename",{get:function(){return""},enumerable:!0,configurable:!0}),e}();__reflect(SceneBase.prototype,"SceneBase",["IScene"]),window.SceneBase=SceneBase;var SceneManager=function(){function e(){this._dicscene=new Array,this._currentscene=null,this._lastscene=""}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},Object.defineProperty(e.prototype,"lastSceneName",{get:function(){return this._lastscene},set:function(e){this._lastscene=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentScene",{get:function(){return this._currentscene},enumerable:!0,configurable:!0}),e.prototype.registerScene=function(e){null==this._dicscene[e.scenename]?this._dicscene[e.scenename]=e:Log.out(this,e.scenename+" is exists")},e.prototype.removeScene=function(e){null!=this._dicscene[e.scenename]&&(this._dicscene[e.scenename]=null)},e.prototype.enterScene=function(e){var t=this._dicscene[e];null!=t&&t!=this._currentscene?(null!=this._currentscene&&(this._lastscene=this.currentScene.scenename,this._currentscene.exit()),this._currentscene=t,this._currentscene.enter()):Log.out(this,e+" is null")},e}();__reflect(SceneManager.prototype,"SceneManager"),window.SceneManager=SceneManager;var PopupManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.init=function(e){this.initPopLayer(e),this.initMsgLayer(e),this.initAlertLayer(e)},t.prototype.initPopLayer=function(e){this._popLayer=new eui.UILayer,this._popLayer.name="pop",this._popLayer.touchThrough=!0,e.addChild(this._popLayer)},t.prototype.initAlertLayer=function(e){this._alertLayer=new eui.UILayer,this._alertLayer.name="alert",this._alertLayer.touchThrough=!0,e.addChild(this._alertLayer)},t.prototype.initMsgLayer=function(e){this._msgLayer=new eui.UILayer,this._msgLayer.name="msg",this._msgLayer.touchThrough=!0,this._msgLayer.touchEnabled=!1,this._msgLayer.touchChildren=!1,e.addChild(this._msgLayer)},t.delPop=function(){t.getInstance()._popLayer.removeChildren()},t.addPop=function(e){t.getInstance()._popLayer.addChild(e)},t.addMsg=function(e){t.getInstance()._msgLayer.addChild(e)},t.delMsg=function(e){t.getInstance()._msgLayer.removeChild(e)},t.addAlert=function(e){t.getInstance()._alertLayer.addChild(e)},t.delAlert=function(e){t.getInstance()._alertLayer.removeChild(e)},t}(egret.EventDispatcher);__reflect(PopupManager.prototype,"PopupManager"),window.PopupManager=PopupManager;var SoundManager=function(){function e(){this._active=!0,this._clicked=!1,this._bgs="",this._bgc=null,this._lastbgs=""}return e.getInstance=function(){return null==e._inst&&(e._inst=new e),e._inst},e.prototype.init=function(e){this._stage=e,this._stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this._stage.addEventListener(egret.Event.ACTIVATE,this.onActive,this),this._stage.addEventListener(egret.Event.DEACTIVATE,this.onDeActive,this)},e.prototype.onActive=function(e){this._active=!0,this.playMusic(this._lastbgs)},e.prototype.onDeActive=function(e){this._active=!1,this._lastbgs=this._bgs,this.stopMusic()},e.prototype.onTouch=function(e){this._stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this._active=!1,this._clicked=!0},e.prototype.playMusic=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return""==e?[2]:(console.log("prepare play sound "+e),this._clicked?(console.log("prepare load sound "+e),[4,RES.getResAsync(e)]):[3,2]);case 1:return n.sent(),console.log(" load sound "+e+"complete"),this._bgs=e,null!=this._bgc&&(this._bgc.stop(),this._bgc=null),""!=this._bgs&&(t=RES.getRes(this._bgs),null!=t&&(this._bgc=t.play(),console.log("play sound "+e))),[3,3];case 2:console.log("not prepare"),0==this._clicked&&console.log("not click"),this._bgs==e&&console.log("same name"),n.label=3;case 3:return[2]}})})},e.prototype.stopMusic=function(){null!=this._bgc&&(this._bgc.stop(),this._bgc=null),this._bgs=""},e.prototype.playSound=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return this._clicked?[4,RES.getResAsync(e)]:[3,2];case 1:n.sent(),t=RES.getRes(e),null!=t&&t.play(0,1),n.label=2;case 2:return[2]}})})},e}();__reflect(SoundManager.prototype,"SoundManager"),window.SoundManager=SoundManager;var UpdateManager=function(){function e(){}return e.start=function(){this._started=!0},e.stop=function(){this._started=!1},e.init=function(){this._lastDelta=egret.getTimer(),egret.Ticker.getInstance().register(this.update,this)},e.update=function(e){if(this._started)for(var t=this._dicupdateable.length-1;t>=0;t--)this._dicupdateable[t].deleted?this._dicupdateable.splice(t,1):this._dicupdateable[t].update(e)},e.addUpdateable=function(e){var t=this._dicupdateable.indexOf(e);e.deleted=!1,-1==t&&this._dicupdateable.push(e)
},e.delUpdateable=function(e){var t=this._dicupdateable.indexOf(e);t>-1&&(this._dicupdateable[t].deleted=!0)},e._dicupdateable=[],e._started=!1,e}();__reflect(UpdateManager.prototype,"UpdateManager"),window.UpdateManager=UpdateManager;var XMLManager=function(){function e(){this._dicData=new Array}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.getListByName=function(e){return this._dicData[e]},e.prototype.parseAll=function(e){for(var t in e)this.parse(t,e[t])},e.prototype.parse=function(e,t){var n=egret.getDefinitionByName(e+"Vo");if(null!=t&&null!=n){for(var i=new Array,r=0;r<t.length;r++){var o=new n(t[r]);i.push(o)}this._dicData[e]=i}else Log.out(this,"parse error "+t)},e}();__reflect(XMLManager.prototype,"XMLManager"),window.XMLManager=XMLManager;